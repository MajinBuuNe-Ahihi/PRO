<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Agent - Tr·ª£ l√Ω Nh√† h√†ng</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='/css/style.css') }}"
    />
  </head>
  <body>
    <div class="app-container">
      <!-- Session Panel -->
      <div class="session-panel" id="sessionPanel">
        <div class="session-header">
          <h3>Phi√™n l√†m vi·ªác</h3>
          <button class="new-chat-btn" onclick="createNewSession()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path
                d="M12 5V19M5 12H19"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
            Phi√™n m·ªõi
          </button>
        </div>

        <div class="session-list" id="sessionList">
          <!-- Sessions will be loaded here -->
        </div>

        <div class="session-footer">
          <button class="clear-all-btn" onclick="clearAllSessions()">
            X√≥a t·∫•t c·∫£
          </button>
        </div>
      </div>

      <!-- Main Chat Container -->
      <div class="chat-container">
        <div class="chat-header">
          <div class="header-left">
            <button class="menu-toggle" onclick="toggleSessionPanel()">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path
                  d="M3 12H21M3 6H21M3 18H21"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
            </button>
            <div>
              <h1>üçΩÔ∏è AI Agent - Tr·ª£ l√Ω Nh√† h√†ng</h1>
              <p>H·ªèi ƒë√°p th√¥ng minh v·ªÅ qu·∫£n l√Ω nh√† h√†ng</p>
            </div>
          </div>
        </div>

        <div class="chat-messages" id="chatMessages">
          <div class="message assistant">
            <div class="message-avatar">AI</div>
            <div class="message-content">
              Xin ch√†o! T√¥i l√† tr·ª£ l√Ω AI cho nh√† h√†ng. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n:
              <ul>
                <li>Qu·∫£n l√Ω menu v√† ƒë∆°n h√†ng</li>
                <li>Ph√¢n t√≠ch doanh thu</li>
                <li>T∆∞ v·∫•n v·ªÅ qu·∫£n l√Ω nh√† h√†ng</li>
                <li>Tr·∫£ l·ªùi c√°c c√¢u h·ªèi kh√°c</li>
              </ul>
              B·∫°n c·∫ßn t√¥i gi√∫p g√¨ h√¥m nay?
            </div>
          </div>
        </div>

        <div class="search-results" id="searchResults" style="display: none">
          <h3>K·∫øt qu·∫£ t√¨m ki·∫øm</h3>
          <div id="searchResultsList"></div>
        </div>

        <div class="chat-input-container">
          <div class="input-wrapper">
            <button
              id="searchToggleBtn"
              class="tool-toggle"
              onclick="toggleSearchTool()"
              title="B·∫≠t t·∫Øt Search web"
            >
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path
                  d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M21 21L16.65 16.65"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span>Search web</span>
            </button>
            <textarea
              id="messageInput"
              placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..."
              rows="1"
              maxlength="1000"
            ></textarea>
            <button id="sendButton" onclick="sendMessage()">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path
                  d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', path='/js/chat.js') }}"></script>
    <script>
      document
        .getElementById('searchInput')
        .addEventListener('keydown', function (e) {
          if (e.key === 'Enter') {
            performSearch()
          }
        })
    </script>
  </body>
</html>
